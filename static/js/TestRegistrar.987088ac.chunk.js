"use strict";(self.webpackChunkens_app=self.webpackChunkens_app||[]).push([[357],{78182:function(n,e,r){r.r(e),r.d(e,{default:function(){return q}});var t,i,o,a,c=r(15671),u=r(43144),l=r(60136),s=r(29388),d=r(30168),f=r(72791),h=r(62298),v=r(78657),p=r(2079),g=(0,p.Ps)(t||(t=(0,d.Z)(["\n  query getweb3 @client {\n    accounts\n    isReadOnly\n  }\n"]))),m=r(80184),j=(0,p.Ps)(i||(i=(0,d.Z)(["\n  query getPendingTransations {\n    pendingTransactions @client {\n      id\n      createdAt\n    }\n  }\n"]))),x=(0,p.Ps)(o||(o=(0,d.Z)(["\n  query getTransactionHistory {\n    transactionHistory @client {\n      id\n      createdAt\n    }\n  }\n"]))),b=(0,p.Ps)(a||(a=(0,d.Z)(["\n  mutation registerTestDomain($name: String!) {\n    registerTestDomain(name: $name) @client {\n      id\n    }\n  }\n"]))),y=function(n){var e;n.setTx;return(0,m.jsx)(h.m,{mutation:b,children:function(n){return(0,m.jsx)("div",{children:(0,m.jsxs)("form",{onSubmit:function(r){r.preventDefault(),n({variables:{name:e.value}}).then((function(n){console.log(n)})),e.value=""},children:[(0,m.jsx)("input",{ref:function(n){e=n}}),(0,m.jsx)("button",{type:"submit",children:"Register subdomain"})]})})}})},T=function(n){(0,l.Z)(r,n);var e=(0,s.Z)(r);function r(){var n;(0,c.Z)(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))).state={started:!1},n}return(0,u.Z)(r,[{key:"render",value:function(){return(0,m.jsxs)(f.Fragment,{children:[(0,m.jsx)(v.A,{query:g,pollInterval:500,children:function(n){var e=n.loading,r=(n.error,n.data);if(e)return(0,m.jsx)("div",{children:"Loading web3"});var t=r.web3,i=r.people;return console.log(r),(0,m.jsxs)(f.Fragment,{children:[(0,m.jsx)("div",{children:t.accounts.length>0?"Your ETH address is ".concat(t.accounts[0]):"Unlock metamask!"}),(0,m.jsx)("div",{children:console.log(i)}),(0,m.jsx)(y,{})]})}}),(0,m.jsx)(v.A,{query:j,children:function(n){var e=n.data,r=n.loading,t=e.pendingTransactions;return r?(0,m.jsx)("div",{children:"Loading pending txs"}):(console.log(e),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"Pending Transactions"}),t.map((function(n){return(0,m.jsx)("li",{tx:n.id,children:(0,m.jsx)("a",{href:"http://ropsten.etherscan.io/tx/".concat(n.id),children:n.id})})}))]}))}}),(0,m.jsx)(v.A,{query:x,children:function(n){var e=n.data,r=n.loading,t=e.transactionHistory;return r?(0,m.jsx)("div",{children:"Loading pending txs"}):(console.log(e),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{children:"Transaction History"}),t.map((function(n){return(0,m.jsx)("li",{children:(0,m.jsx)("a",{href:"http://ropsten.etherscan.io/tx/".concat(n.id),children:n.id})},n.id)}))]}))}})]})}}]),r}(f.Component),q=T},62298:function(n,e,r){r.d(e,{m:function(){return o}});var t=r(52007),i=r(84376);function o(n){var e=(0,i.D)(n.mutation,n),r=e[0],t=e[1];return n.children?n.children(r,t):null}o.propTypes={mutation:t.object.isRequired,variables:t.object,optimisticResponse:t.oneOfType([t.object,t.func]),refetchQueries:t.oneOfType([t.arrayOf(t.oneOfType([t.string,t.object])),t.func]),awaitRefetchQueries:t.bool,update:t.func,children:t.func.isRequired,onCompleted:t.func,onError:t.func,fetchPolicy:t.string}},78657:function(n,e,r){r.d(e,{A:function(){return a}});var t=r(3431),i=r(52007),o=r(52336);function a(n){var e=n.children,r=n.query,i=(0,t.__rest)(n,["children","query"]),a=(0,o.a)(r,i);return a?e(a):null}a.propTypes={client:i.object,children:i.func.isRequired,fetchPolicy:i.string,notifyOnNetworkStatusChange:i.bool,onCompleted:i.func,onError:i.func,pollInterval:i.number,query:i.object.isRequired,variables:i.object,ssr:i.bool,partialRefetch:i.bool,returnPartialData:i.bool}},84376:function(n,e,r){r.d(e,{D:function(){return s}});var t=r(3431),i=r(72791),o=r(63124),a=r(5970),c=r(72364),u=r(29484),l=r(65046);function s(n,e){var r=(0,l.x)(null===e||void 0===e?void 0:e.client);(0,c.Vp)(n,c.n_.Mutation);var s=(0,i.useState)({called:!1,loading:!1,client:r}),d=s[0],f=s[1],h=(0,i.useRef)({result:d,mutationId:0,isMounted:!0,client:r,mutation:n,options:e});Object.assign(h.current,{client:r,options:e,mutation:n});var v=(0,i.useCallback)((function(n){void 0===n&&(n={});var e=h.current,r=e.client,i=e.options,c=e.mutation,l=(0,t.__assign)((0,t.__assign)({},i),{mutation:c});h.current.result.loading||l.ignoreResults||f(h.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:r});var s=++h.current.mutationId,d=(0,o.J)(l,n);return r.mutate(d).then((function(e){var t,i,o=e.data,c=e.errors,v=c&&c.length>0?new u.c({graphQLErrors:c}):void 0;if(s===h.current.mutationId&&!d.ignoreResults){var p={called:!0,loading:!1,data:o,error:v,client:r};h.current.isMounted&&!(0,a.D)(h.current.result,p)&&f(h.current.result=p)}return null===(t=l.onCompleted)||void 0===t||t.call(l,e.data),null===(i=n.onCompleted)||void 0===i||i.call(n,e.data),e})).catch((function(e){var t,i;if(s===h.current.mutationId&&h.current.isMounted){var o={loading:!1,error:e,data:void 0,called:!0,client:r};(0,a.D)(h.current.result,o)||f(h.current.result=o)}if(l.onError||d.onError)return null===(t=l.onError)||void 0===t||t.call(l,e),null===(i=n.onError)||void 0===i||i.call(n,e),{data:void 0,errors:e};throw e}))}),[]),p=(0,i.useCallback)((function(){f({called:!1,loading:!1,client:r})}),[]);return(0,i.useEffect)((function(){return h.current.isMounted=!0,function(){h.current.isMounted=!1}}),[]),[v,(0,t.__assign)({reset:p},d)]}}}]);
//# sourceMappingURL=TestRegistrar.987088ac.chunk.js.map